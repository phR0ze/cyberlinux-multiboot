#!/bin/bash
teamviewer_conf=/etc/teamviewer/global.conf
while [ ! -f $teamviewer_conf ]; do sleep 1; done
if [ $(grep EulaAccepted $teamviewer_conf &>/dev/null; echo $?) != 0 ]; then
  echo "[int32] EulaAccepted = 1" >> $teamviewer_conf
  echo "[int32] LicenseType = 10000" >> $teamviewer_conf
  echo "[int32] LanOnly = 1" >> $teamviewer_conf
  echo "[int32] General_DirectLAN = 1" >> $teamviewer_conf
  echo "[int32] Logging = 0" >> $teamviewer_conf
  echo "[int32] LogIncomingConnections = 0" >> $teamviewer_conf
  echo "[int32] LogOutgoingConnections = 0" >> $teamviewer_conf
  echo "[int32] Always_Online = 1" >> $teamviewer_conf
  echo "[int32] Security_Disableshutdown = 1" >> $teamviewer_conf
  echo "[int32] ACFullAccessOnLoginScreen = 1" >> $teamviewer_conf
  echo "[int32] Security_PasswordStrength = 3" >> $teamviewer_conf
  (systemctl restart teamviewerd && sleep 2)
fi
rm -f /home/$SUDO_USER/.config/autostart/teamviewer.desktop
